

## FastExplorationManager::planLookAheadPose

### void TopoPlanner::planGlobalPathNew

得到多条路径 global_path_segments_

#### void RapidCoverPlanner::Initialize

##### void RapidCoverPlanner::getSuitableTourPoints

选择tour_points_

##### void RapidCoverPlanner::viewpointsFrontierGain

#### void RapidCoverPlanner::singlePointPlanning

根据vp和vp连接的frontier，确定下一个目标vp

路径存在planner\_->path\_segments\_ 里

#### TopoPlanner::wayPoseGeneration

根据路径点生成每个点的yaw角，生成方式是从上一个点直接指向下一个点。

### void PathExecution::findLlookAheadPoint

#### setPathToFollow

将路径按grid_size_进行插值，并存入global\_path\_to\_follow\_中

#### lookAheadPointControlLoop

这个函数中，global\_path\_to\_follow\_ 似乎没用

选择path\_segments\_ 中的第一段路径

找到这段path中在当前local_map中最远的free点

将 look_ahead_point 作为 goal_pose，作为后续规划的目标点

## void preprocessUpdateCallback

### void updateElements

更新local_grid_map

更新frontier

#### void ViewpointManager::updateViewpoints

##### void ViewpointManager::frontierAttachInSDFMap

1. 将历史vp(candidate_viewpoints\_)存入representative_points_
2. 采样vp
3. 去除采样vp中距离历史vp中距离太近的
4. 将筛选后的采样vp加入representative_points_
5. 遍历frontier
   - 太远的frontier保持原来的连接
   - 近的frontier重新与representative_points_中的vp连接
6. 将frontier与vp的连接关系存入
   - frontiers_viewpoints_ ，viewpoints_attached_frontiers
7. 遍历viewpoints_attached_frontiers_中所有vp
   - 距离当前位置很近的vp：删去frontiers_viewpoints\_和viewpoints_attached_frontiers\_中的连接关系，从simple_global_frontier_cells\_中删去对应的frontier
   - 连接frontier体积小的vp：删去viewpoints_attached_frontiers\_中的连接关系
8. 将viewpoints_attached_frontiers\_中的vp存入candidate_viewpoints_

frontiers_viewpoints_ 

- key为frontier	value为vp

viewpoints_attached_frontiers_

- key为vp	value为vector\<frontier>

candidate_viewpoints_

- 记录了历史frontier